# 功能规范：[功能名称]

**功能分支**: `[###-功能名称]`  
**创建时间**: [日期]  
**状态**: 草稿  
**输入**: 用户描述："$ARGUMENTS"

## 执行流程（主流程）
```
1. 从输入解析用户描述
   → 如果为空：错误 "未提供功能描述"
2. 从描述中提取关键概念
   → 识别：参与者、操作、数据、约束
3. 对于每个不清楚的方面：
   → 标记为 [需要澄清：具体问题]
4. 填写用户场景和测试部分
   → 如果没有清晰的用户流程：错误 "无法确定用户场景"
5. 生成功能需求
   → 每个需求必须可测试
   → 标记模糊需求
6. 识别关键实体（如果涉及数据）
7. 运行审查检查清单
   → 如果有任何 [需要澄清]：警告 "规范有不确定性"
   → 如果发现实施细节：错误 "删除技术细节"
8. 返回：成功（规范准备好进行规划）
```

---

## ⚡ 快速指南
- ✅ 专注于用户需要什么和为什么
- ❌ 避免如何实施（无技术栈、API、代码结构）
- 👥 为业务利益相关者而非开发人员编写

### 章节要求
- **必需章节**：每个功能都必须完成
- **可选章节**：仅在与功能相关时包含
- 当章节不适用时，完全删除它（不要留作"N/A"）

### 对于AI生成
从用户提示创建此规范时：
1. **标记所有歧义**：对于任何需要假设的内容使用 [需要澄清：具体问题]
2. **不要猜测**：如果提示没有指定某些内容（例如，"登录系统"但没有认证方法），标记它
3. **像测试人员一样思考**：每个模糊需求都应该在"可测试且明确"检查清单项中失败
4. **常见未充分指定的领域**：
   - 用户类型和权限
   - 数据保留/删除策略  
   - 性能目标和规模
   - 错误处理行为
   - 集成需求
   - 安全/合规需求

---

## 用户场景和测试 *（必需）*

### 主要用户故事
[用简单语言描述主要用户旅程]

### 验收场景
1. **给定** [初始状态]，**当** [操作]，**那么** [预期结果]
2. **给定** [初始状态]，**当** [操作]，**那么** [预期结果]

### 边界情况
- 当 [边界条件] 时会发生什么？
- 系统如何处理 [错误场景]？

## 需求 *（必需）*

### 业务背景和价值主张
**为什么需要这个功能**：[描述业务问题和预期收益]
**目标用户群体**：[明确主要和次要用户]
**成功指标**：[如何衡量功能成功 - KPI、用户满意度、业务指标等]

### 功能需求
- **FR-001**: 系统必须 [具体能力，例如，"允许用户创建账户"]
- **FR-002**: 系统必须 [具体能力，例如，"验证电子邮件地址"]
- **FR-003**: 用户必须能够 [关键交互，例如，"重置密码"]
- **FR-004**: 系统必须 [数据需求，例如，"持久化用户偏好"]
- **FR-005**: 系统必须 [行为，例如，"记录所有安全事件"]

*标记不清楚需求的示例：*
- **FR-006**: 系统必须通过 [需要澄清：未指定认证方法 - 电子邮件/密码、SSO、OAuth？] 认证用户
- **FR-007**: 系统必须保留用户数据 [需要澄清：未指定保留期限]

### 非功能性需求
**性能要求**：
- [需要澄清：响应时间要求] - 例如：页面加载时间 < 2秒
- [需要澄清：并发用户数] - 例如：支持1000个并发用户
- [需要澄清：数据处理量] - 例如：每秒处理100个请求

**安全要求**：
- [需要澄清：数据加密要求]
- [需要澄清：访问控制级别]
- [需要澄清：审计日志要求]

**可用性要求**：
- [需要澄清：系统可用性目标] - 例如：99.9%正常运行时间
- [需要澄清：错误恢复时间]

**可扩展性要求**：
- [需要澄清：预期用户增长规模]
- [需要澄清：数据增长预期]

### 关键实体 *（如果功能涉及数据则包含）*
- **[实体1]**: [它代表什么，关键属性但不涉及实施]
- **[实体2]**: [它代表什么，与其他实体的关系]

### 功能边界和排除项
**明确包含**：
- [列出明确包含的功能和场景]

**明确排除**：
- [列出明确排除的功能，避免范围蔓延]
- [不在当前版本中考虑的功能]

### 依赖和集成
**内部依赖**：
- [依赖的其他系统或模块]
- [与其他功能的关联]

**外部依赖**：
- [第三方服务或API]
- [硬件或基础设施依赖]

### 数据和隐私要求
**数据收集**：
- [需要收集哪些用户数据]
- [数据收集的合法性依据]

**数据处理**：
- [数据存储位置和期限]
- [数据访问权限控制]

**隐私保护**：
- [用户隐私保护措施]
- [数据删除和匿名化策略]

### 国际化和本地化需求
**多语言支持**：
- [需要支持的语言列表]
- [翻译内容范围]

**地区适配**：
- [不同地区的特殊要求]
- [文化和法规适配]

### 可访问性要求
**无障碍访问**：
- [需要符合的无障碍标准，如WCAG 2.1]
- [特殊用户群体的支持需求]

**设备兼容性**：
- [需要支持的设备类型和屏幕尺寸]
- [辅助技术支持]

---

## 用户体验设计 (UX Design)

### 用户研究洞察
**目标用户画像**：
- **主要用户群体**：[描述核心用户特征、需求、痛点]
- **次要用户群体**：[描述其他重要用户群体]
- **用户使用场景**：[描述用户在什么情境下使用此功能]
- **用户目标和动机**：[描述用户希望通过此功能达成的目标]

**用户旅程地图**：
1. **发现阶段**：用户如何发现此功能
   - 触发条件：[什么情况下用户会寻找此功能]
   - 期望行为：[用户期望如何找到和使用]

2. **使用阶段**：核心交互流程
   - 关键步骤：[描述用户完成主要任务的步骤]
   - 决策点：[用户需要做出选择的时刻]
   - 潜在障碍：[可能阻碍用户的因素]

3. **完成阶段**：用户达到目标
   - 成功指标：[如何判断用户成功完成任务]
   - 后续行为：[完成任务后的预期用户行为]

### 信息架构
**内容组织结构**：
- **主要功能分组**：[如何组织相关功能]
- **导航层级**：[信息层级的深度和广度]
- **标签系统**：[使用的术语和命名规范]
- **搜索和发现**：[用户如何找到特定内容或功能]

**内容优先级**：
- **一级信息**：用户最常访问的核心内容
- **二级信息**：支持性信息和高级功能
- **三级信息**：详细说明和帮助内容

### 交互设计
**交互模式**：
- **主要交互方式**：[点击、滑动、拖拽、键盘等]
- **手势支持**：[移动设备上的手势操作]
- **快捷键**：[提高效率的键盘快捷键]
- **语音交互**：[语音命令和控制支持]

**反馈机制**：
- **系统反馈**：[操作确认、错误提示、进度指示]
- **状态指示**：[当前状态、可用/不可用状态]
- **加载和等待**：[异步操作的等待体验]
- **成功和完成**：[任务完成的确认方式]

**错误预防和恢复**：
- **预防措施**：[如何防止用户犯错]
- **错误提示**：[清晰的错误信息和解决建议]
- **恢复路径**：[用户如何从错误中恢复]
- **撤销和重做**：[操作的可逆性支持]

### 界面设计要求
**视觉层次**：
- **信息重要性**：[如何通过视觉设计突出重要信息]
- **视觉引导**：[如何引导用户注意力]
- **一致性要求**：[与现有设计系统的保持一致]
- **品牌识别**：[品牌元素的应用方式]

**布局和排版**：
- **响应式设计**：[不同屏幕尺寸的适配策略]
- **内容密度**：[信息密度的控制原则]
- **留白和间距**：[视觉呼吸空间的运用]
- **对齐和网格**：[布局的对齐原则]

**色彩和对比**：
- **主色调**：[主要使用的颜色]
- **辅助色彩**：[补充和强调色]
- **对比度要求**：[确保可读性的对比度标准]
- **色彩意义**：[不同颜色传达的含义]

### 微交互和动效
**过渡动画**：
- **页面切换**：[页面间的过渡效果]
- **状态变化**：[元素状态变化的动画]
- **加载动画**：[等待过程的视觉反馈]
- **手势反馈**：[触摸手势的视觉响应]

**微交互设计**：
- **按钮交互**：[点击、悬停、禁用状态]
- **表单交互**：[输入、验证、提交的反馈]
- **数据展示**：[数据变化和更新的动画]
- **通知提示**：[消息通知的展现方式]

### 可用性测试要求
**测试场景**：
- **核心任务流程**：[主要用户任务的测试用例]
- **边界情况**：[极端使用场景的测试]
- **错误处理**：[错误情况下的用户体验测试]
- **新用户引导**：[首次使用用户的测试]

**成功指标**：
- **任务完成率**：[目标：>95%]
- **任务完成时间**：[目标：比基准快20%]
- **错误率**：[目标：<5%]
- **用户满意度**：[目标：>4.5/5.0]

**测试方法**：
- **可用性测试**：[观察用户实际使用情况]
- **A/B测试**：[对比不同设计方案的效果]
- **问卷调查**：[收集用户主观反馈]
- **数据分析**：[分析用户行为数据]

---

## 审查和验收检查清单
*门控：在主流程执行期间运行自动检查*

### 内容质量
- [ ] 无实施细节（语言、框架、API）
- [ ] 专注于用户价值和业务需求
- [ ] 为非技术利益相关者编写
- [ ] 所有必需章节已完成

### 需求完整性
- [ ] 不再有 [需要澄清] 标记
- [ ] 需求可测试且明确
- [ ] 成功标准可衡量
- [ ] 范围明确界定
- [ ] 依赖和假设已识别

## 需求完整性检查清单

### 业务层面
- [ ] 业务背景和价值主张已明确定义
- [ ] 目标用户群体已识别
- [ ] 成功指标（KPI）已设定
- [ ] 功能边界和排除项已明确
- [ ] 与其他功能的依赖关系已识别

### 功能层面
- [ ] 所有用户故事和验收场景已覆盖
- [ ] 边界情况和异常场景已考虑
- [ ] 错误处理机制已定义
- [ ] 用户体验流程已完整描述
- [ ] 功能需求可测试且明确

### 技术层面
- [ ] 性能要求已量化（响应时间、并发数、处理量）
- [ ] 安全要求和访问控制已定义
- [ ] 可用性和容错要求已明确
- [ ] 可扩展性要求已考虑
- [ ] 技术依赖和集成点已识别

### 数据和隐私
- [ ] 数据收集范围和目的已明确
- [ ] 数据存储和保留策略已定义
- [ ] 隐私保护措施已考虑
- [ ] 数据删除和匿名化策略已制定
- [ ] 符合相关法规要求

### 用户体验和可访问性
- [ ] 用户界面和交互流程已设计
- [ ] 不同用户角色的使用场景已覆盖
- [ ] 可访问性标准已确定
- [ ] 设备兼容性要求已明确
- [ ] 国际化和本地化需求已考虑

### UX 设计深度
- [ ] 用户研究和画像已完成
- [ ] 用户旅程地图已绘制
- [ ] 信息架构和导航设计已确定
- [ ] 交互设计模式已定义
- [ ] 视觉设计要求已明确
- [ ] 微交互和动效已设计
- [ ] 可用性测试计划已制定

### 质量保证
- [ ] 测试策略和验收标准已定义
- [ ] 质量门禁和检查点已设定
- [ ] 回归测试范围已确定
- [ ] 性能测试场景已规划
- [ ] 安全测试要求已明确

### 风险和假设
- [ ] 技术风险已识别和评估
- [ ] 业务风险已分析
- [ ] 依赖假设已明确
- [ ] 缓解策略已制定
- [ ] 应急预案已考虑

---

## 执行状态
*在处理期间由主流程更新*

- [ ] 用户描述已解析
- [ ] 关键概念已提取
- [ ] 歧义已标记
- [ ] 用户场景已定义
- [ ] 需求已生成
- [ ] 实体已识别
- [ ] 审查检查清单已通过

---